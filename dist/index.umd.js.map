{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["import { Controller } from \"stimulus\";\n\nexport default class extends Controller {\n  connect() {\n    this._searchForConductor();\n  }\n\n  disconnect() {\n    this._hasConductor && this._conductorController._removeMusician(this);\n  }\n\n  _searchForConductor() {\n    const conductor = this.element.closest(\n      `[data-controller*=\"${this._conductorName}\"]`\n    );\n\n    if (conductor) {\n      const conductorController = this.application.getControllerForElementAndIdentifier(\n        conductor,\n        this._conductorName\n      );\n\n      this[`${this._conductorName}Controller`] = conductorController;\n\n      this._hasConductor && this._conductorController._addMusician(this);\n    }\n  }\n\n  _addMusician(musicianController) {\n    this[`${musicianController.identifier}Controllers`] = [\n      ...(this[`${musicianController.identifier}Controllers`] || []),\n      musicianController\n    ];\n  }\n\n  _removeMusician(musicianController) {\n    const index = this._musicianControllers.indexOf(musicianController);\n\n    if (index > -1) {\n      this._musicianControllers.splice(index, 1);\n    }\n  }\n\n  get _hasConductor() {\n    return typeof this._conductorController !== \"undefined\";\n  }\n\n  get _conductorController() {\n    return this[`${this._conductorName}Controller`];\n  }\n\n  get _musicianControllers() {\n    return this[`${this._musicianName}Controllers`];\n  }\n\n  get _conductorName() {\n    return this.constructor.conductorId || `${this.identifier}s`;\n  }\n\n  get _musicianName() {\n    return (\n      this.constructor.musicianId ||\n      `${this.identifier.slice(0, this.identifier.length - 1)}`\n    );\n  }\n}\n"],"names":["_searchForConductor","_hasConductor","_conductorController","_removeMusician","conductor","element","closest","_conductorName","conductorController","application","getControllerForElementAndIdentifier","_addMusician","musicianController","identifier","index","_musicianControllers","indexOf","splice","_musicianName","constructor","conductorId","musicianId","slice","length","Controller"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gCAGY;EACR,WAAKA,mBAAL;EACD;;;mCAEY;EACX,WAAKC,aAAL,IAAsB,KAAKC,oBAAL,CAA0BC,eAA1B,CAA0C,IAA1C,CAAtB;EACD;;;4CAEqB;EACpB,YAAMC,SAAS,GAAG,KAAKC,OAAL,CAAaC,OAAb,CACf,sBAAqB,KAAKC,cAAe,IAD1B,CAAlB;;EAIA,UAAIH,SAAJ,EAAe;EACb,cAAMI,mBAAmB,GAAG,KAAKC,WAAL,CAAiBC,oCAAjB,CAC1BN,SAD0B,EAE1B,KAAKG,cAFqB,CAA5B;EAKA,aAAM,GAAE,KAAKA,cAAe,YAA5B,IAA2CC,mBAA3C;EAEA,aAAKP,aAAL,IAAsB,KAAKC,oBAAL,CAA0BS,YAA1B,CAAuC,IAAvC,CAAtB;EACD;EACF;;;mCAEYC,oBAAoB;EAC/B,WAAM,GAAEA,kBAAkB,CAACC,UAAW,aAAtC,IAAsD,CACpD,IAAI,KAAM,GAAED,kBAAkB,CAACC,UAAW,aAAtC,KAAuD,EAA3D,CADoD,EAEpDD,kBAFoD,CAAtD;EAID;;;sCAEeA,oBAAoB;EAClC,YAAME,KAAK,GAAG,KAAKC,oBAAL,CAA0BC,OAA1B,CAAkCJ,kBAAlC,CAAd;;EAEA,UAAIE,KAAK,GAAG,CAAC,CAAb,EAAgB;EACd,aAAKC,oBAAL,CAA0BE,MAA1B,CAAiCH,KAAjC,EAAwC,CAAxC;EACD;EACF;;;uBAEmB;EAClB,aAAO,OAAO,KAAKZ,oBAAZ,KAAqC,WAA5C;EACD;;;uBAE0B;EACzB,aAAO,KAAM,GAAE,KAAKK,cAAe,YAA5B,CAAP;EACD;;;uBAE0B;EACzB,aAAO,KAAM,GAAE,KAAKW,aAAc,aAA3B,CAAP;EACD;;;uBAEoB;EACnB,aAAO,KAAKC,WAAL,CAAiBC,WAAjB,IAAiC,GAAE,KAAKP,UAAW,GAA1D;EACD;;;uBAEmB;EAClB,aACE,KAAKM,WAAL,CAAiBE,UAAjB,IACC,GAAE,KAAKR,UAAL,CAAgBS,KAAhB,CAAsB,CAAtB,EAAyB,KAAKT,UAAL,CAAgBU,MAAhB,GAAyB,CAAlD,CAAqD,EAF1D;EAID;;;;IA9D0BC;;;;;;;;"}